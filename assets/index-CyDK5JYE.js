(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const h=14,w=30,p=20,a=document.querySelector("canvas"),c=a.getContext("2d");a.width=p*h;a.height=p*w;c.scale(p,p);const f=O(h,w);function O(o,t){return Array(t).fill().map(()=>Array(o).fill(0))}const e={position:{x:5,y:5},shape:[[1,1],[1,1]]},y=[[[1,1],[1,1]],[[1,1,1,1]],[[0,1,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,1]],[[1,0],[1,0],[1,1]]];let g=0,d=0,m=0;function E(o=0){const t=o-m;m=o,d+=t,d>1e3&&(e.position.y++,d=0,l()&&(e.position.y--,x(),A())),R(),window.requestAnimationFrame(E)}function R(){c.fillStyle="#000",c.fillRect(0,0,a.width,a.height),f.forEach((o,t)=>{o.forEach((n,r)=>{n===1&&(c.fillStyle="yellow",c.fillRect(r,t,1,1))})}),e.shape.forEach((o,t)=>{o.forEach((n,r)=>{n&&(c.fillStyle="red",c.fillRect(r+e.position.x,t+e.position.y,1,1))})}),document.querySelector("span").innerText=g}document.addEventListener("keydown",o=>{if(o.key==="ArrowLeft"&&(e.position.x--,l()&&e.position.x++),o.key==="ArrowRight"&&(e.position.x++,l()&&e.position.x--),o.key==="ArrowDown"&&(e.position.y++,l()&&(e.position.y--,x(),A())),o.key==="ArrowUp"){const t=[];for(let r=0;r<e.shape[0].length;r++){const i=[];for(let s=e.shape.length-1;s>=0;s--)i.push(e.shape[s][r]);t.push(i)}const n=e.shape;e.shape=t,l()&&(e.shape=n)}});function l(){return e.shape.find((o,t)=>o.find((n,r)=>{var i;return n!=0&&((i=f[t+e.position.y])==null?void 0:i[r+e.position.x])!=0}))}function x(){e.shape.forEach((o,t)=>{o.forEach((n,r)=>{n===1&&(f[t+e.position.y][r+e.position.x]=1)})}),e.position.x=0,e.position.y=0,e.shape=y[Math.floor(Math.random()*y.length)],l()&&(window.alert("Game Over"),f.forEach(o=>o.fill(0)))}function A(){const o=[];f.forEach((t,n)=>{t.every(r=>r===1)&&o.push(n)}),o.forEach(t=>{f.splice(t,1);const n=Array(h).fill(0);f.unshift(n),g+=10})}E();
